(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var a="b8c83742a57bf0ecea649246f86171f0";const o=async function(e,t=""){const n=t||document.querySelector("#city-name").value||"Toronto",r=await l(n,e);console.log(r);const a=r.coord.lat,o=r.coord.lon,u=await s(a,o,e);console.log(r);const m=r.name,d=r.main.temp,g=r.main.temp_min,y=r.main.temp_max,h=r.main.feels_like,p=r.weather[0].description;!function(e,t,n,r,a,o,c,i){document.querySelector(".city-name").textContent=e,document.querySelector(".dt").textContent=t,document.querySelector(".temperature").textContent=Math.round(n)+"°",document.querySelector(".high-low").textContent=Math.round(a)+"° / "+Math.round(r)+"°",document.querySelector(".feels-like").textContent="Feels like "+Math.round(o)+"°",document.querySelector(".weather-description").textContent=c,document.querySelector(".weather-icon").innerHTML=function(e){return"thunderstorm"==e?'<img class="weather-img" src="./img/thunderstorm-100.png" alt="">':"rain"==e?'<img class="weather-img" src="./img/shower-rain-100.png" alt="">':"sunny-rain"==e?'<img class="weather-img" src="./img/rain-100.png" alt="">':"snow"==e?'<img class="weather-img" src="./img/snow-100.png" alt="">':"haze"==e?'<img class="weather-img" src="./img/haze-100.png" alt="">':"clear"==e?'<img class="weather-img" src="./img/clear-sky-100.png" alt="">':"few-clouds"==e?'<img class="weather-img" src="./img/few-clouds-100.png" alt="">':"clouds"==e?'<img class="weather-img" src="./img/scattered-clouds-100.png" alt="">':void 0}(i)}(m,i(u.current.dt,u.timezone_offset),d,g,y,h,p,c(r.weather[0].id)),function(e){console.log(e);for(let t=1;t<8;t++)document.querySelector("#day-"+t).textContent=i(e.daily[t].dt,e.timezone_offset,"day");for(let t=1;t<8;t++)document.querySelector("#date-"+t).textContent=new Date(1e3*e.daily[t].dt).toString().slice(4,10);for(let n=1;n<8;n++)document.querySelector("#day-"+n+"-icon").innerHTML="thunderstorm"==(t=c(e.daily[n].weather[0].id))?'<img class="weather-img" src="./img/thunderstorm-50.png" alt="">':"rain"==t?'<img class="weather-img" src="./img/shower-rain-50.png" alt="">':"sunny-rain"==t?'<img class="weather-img" src="./img/rain-50.png" alt="">':"snow"==t?'<img class="weather-img" src="./img/snow-50.png" alt="">':"haze"==t?'<img class="weather-img" src="./img/haze-50.png" alt="">':"clear"==t?'<img class="weather-img" src="./img/clear-sky-50.png" alt="">':"few-clouds"==t?'<img class="weather-img" src="./img/few-clouds-50.png" alt="">':"clouds"==t?'<img class="weather-img" src="./img/scattered-clouds-50.png" alt="">':void 0;var t;for(let t=1;t<8;t++)document.querySelector("#day-"+t+"-temp-max").innerHTML=Math.round(e.daily[t].temp.max)+"°",document.querySelector("#day-"+t+"-temp-low").innerHTML=Math.round(e.daily[t].temp.min)+"°"}(u)};function c(e){let t="";return e>=200&&e<=232?t="thunderstorm":e>=300&&e<=321?t="rain":e>=500&&e<=504?t="sunny-rain":511==e?t="snow":e>=520&&e<=531?t="rain":e>=600&&e<=622?t="snow":e>=701&&e<=781?t="haze":800==e?t="clear":801==e?t="few-clouds":e>=802&&e<=804&&(t="clouds"),t}function i(t,a,o="full"){const c=function(t){return e(1,arguments),n(1e3*r(t))}(t+a).toUTCString();let i=c.slice(0,3),s=c.slice(5,7),l=c.slice(8,11),u=c.slice(17,19);const m=c.slice(20,22);let d;return s<10&&(s=s.slice(1)),"Jan"===l?l="January":"Feb"===l?l="Febuary":"Mar"===l?l="March":"Apr"===l?l="April":"May"===l?l="May":"Jun"===l?l="June":"Jul"===l?l="July":"Aug"===l?l="August":"Sep"===l?l="September":"Oct"===l?l="October":"Nov"===l?l="November":"Dec"===l&&(l="December"),"day"===o?("Mon"===i?i="Monday":"Tue"===i?i="Tuesday":"Wed"===i?i="Wednesday":"Thu"===i?i="Thursday":"Fri"===i?i="Friday":"Sat"===i?i="Saturday":"Sun"===i&&(i="Sunday"),i):(d=u>11?"PM":"AM",u>12&&(u-=12),u<10&&"AM"===d&&(u=u.slice(1,2)),"0"===u&&(u=12),`${i}, ${l} ${s} ${u}:${m} ${d}`)}const s=async(e,t,n)=>{let r=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&units=${n}&appid=${a}`;try{let e=await fetch(r);return await e.json()}catch(e){console.log(e)}},l=async function(e,t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=${a}`);return await n.json()}catch(e){console.log("fetchWeather catch"),console.log(e)}},u=document.querySelector("form");document.querySelector("#city-name");let m="metric";const d=document.querySelector(".f-btn"),g=document.querySelector(".change-unit .c-btn");"metric"==m&&g.classList.add("active-unit"),d.addEventListener("click",(()=>{g.classList.remove("active-unit"),d.classList.remove("active-unit"),d.classList.add("active-unit"),m="imperial",o(m)})),g.addEventListener("click",(()=>{g.classList.remove("active-unit"),d.classList.remove("active-unit"),g.classList.add("active-unit"),m="metric",o(m)})),u.addEventListener("submit",(e=>{e.preventDefault(),o(m)})),o(m,"Toronto")})();